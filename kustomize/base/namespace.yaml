# ============================================
# ğŸ†• ì‹ ê·œ - kustomize/base/namespace.yaml
# ============================================
# ì›ë³¸: terraform/serviceaccount.tfì˜ kubernetes_namespace_v1.app_ns
#
# ì™œ Kustomizeë¡œ ì´ê´€í–ˆëŠ”ê°€?
# - NamespaceëŠ” K8s ë…¼ë¦¬ ë¦¬ì†ŒìŠ¤ â†’ K8s ë„êµ¬ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ìì—°ìŠ¤ëŸ¬ì›€
# - Terraform State ë¬¸ì œ ì‹œ Namespaceê¹Œì§€ ì˜í–¥ë°›ëŠ” ê²ƒì„ ë°©ì§€
# - Kustomize overlayì˜ namespace: í•„ë“œê°€ metadata.nameì„ ìë™ ë³€ê²½
#
# ë™ì‘ ì›ë¦¬:
# - baseì—ì„œ name: appìœ¼ë¡œ ì •ì˜
# - overlayì—ì„œ namespace: app-dev â†’ metadata.nameì´ app-devë¡œ ë³€ê²½ë¨
# - overlayì—ì„œ namespace: app-prod â†’ metadata.nameì´ app-prodë¡œ ë³€ê²½ë¨
#
apiVersion: v1
kind: Namespace
metadata:
  name: app  # overlayì—ì„œ app-dev ë˜ëŠ” app-prodë¡œ ë³€ê²½ë¨
  labels:
    app.kubernetes.io/part-of: exchange-settlement
    app.kubernetes.io/managed-by: kustomize

    # â”€â”€â”€ Pod Security Admission (PSA) â”€â”€â”€
    # Terraformì—ì„œ ê°€ì ¸ì˜¨ ë³´ì•ˆ ì •ì±… ê·¸ëŒ€ë¡œ ìœ ì§€
    # restricted: ê°€ì¥ ì—„ê²©í•œ ë³´ì•ˆ ì •ì±…
    # enforce: ì •ì±… ìœ„ë°˜ ì‹œ Pod ìƒì„± ê±°ë¶€
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/enforce-version: v1.34
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted